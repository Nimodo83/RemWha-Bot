/* 
♾ ━━━━━━━━
├ EL ARCHIVO FUE CREADO, 
├ MEJORADO O EDITADO 
├ PARA HAJIME-BOT UN BOT 
├ DE CUERVO-TEAM-SUPREME 
├ ⇝𓆰ࣩ፝֟𓆪͜︵֟፝᷼꯬ઈ𓅇︱ꦾꦼ۪۠ 𝕮︩︪۪𝖀້︩︪݊𝕰͠ຼ݂𝕽້︩︪݊𝓥້︩︪𝕺͠ຼ ۪۫ઉ۟︵֟፝᷼꯬ ࣭᷼𓆰ࣩ֟፝𓆪
├ Dejen Los Creditos De Cuervo-Team-Supreme 
├ GitHub Cuervo-Team-Supreme:
├ https://github.com/Nimodo83/Cuervo-Team-Supreme 
├ GitHub Hajime-Bot:
├ https://github.com/CuervoOFC/PREBOT
├ Host Cuervo-Team-Supreme 
├ https://cuervo-host.shop
├ RECUERDA DEJAR Y RESPETAR NUESTROS 
├ CREDITOS DE NUESTROS PROYECTOS 
├ DE CUERVO-TEAM-SUPREME PUTA LACRA
♾ ━━━━━━━━*/
//import _0x5078x1 from '\x6E\x6F\x64\x65\x2D\x66\x65\x74\x63\x68';import _0x5078x2 from '\x79\x74\x2D\x73\x65\x61\x72\x63\x68';import _0x5078x3 from '\x61\x78\x69\x6F\x73';const _0x5078=['\x6D\x70\x33','\x6D\x34\x61','\x77\x65\x62\x6D','\x61\x63\x63','\x66\x6C\x61\x63','\x6F\x70\x75\x73','\x6F\x67\x67','\x77\x61\x76','\x33\x36\x30','\x34\x38\x30','\x37\x32\x30','\x31\x30\x38\x30','\x31\x34\x34\x30','\x34\x6B','\x46\x6F\x72\x6D\x61\x74\x6F\x20\x6E\x6F\x20\x73\x6F\x70\x6F\x72\x74\x61\x64\x6F\x2C\x20\x76\x65\x72\x69\x66\x69\x63\x61\x20\x6C\x61\x20\x6C\x69\x73\x74\x61\x20\x64\x65\x20\x66\x6F\x72\x6D\x61\x74\x6F\x73\x20\x64\x69\x73\x70\x6F\x6E\x69\x62\x6C\x65\x73\x2E','\x47\x45\x54','\x68\x74\x74\x70\x73\x3A\x2F\x2F\x70\x2E\x6F\x63\x65\x61\x6E\x73\x61\x76\x65\x72\x2E\x69\x6E\x2F\x61\x6A\x61\x78\x2F\x64\x6F\x77\x6E\x6C\x6F\x61\x64\x2E\x70\x68\x70\x3F\x66\x6F\x72\x6D\x61\x74\x3D','\x26\x75\x72\x6C\x3D','\x26\x61\x70\x69\x3D\x64\x66\x63\x62\x36\x64\x37\x36\x66\x32\x66\x36\x61\x39\x38\x39\x34\x67\x6A\x6B\x65\x67\x65\x38\x61\x34\x61\x62\x32\x33\x32\x32\x32\x32','\x55\x73\x65\x72\x2D\x41\x67\x65','\x4D\x6F\x7A\x69\x6C\x6C\x61\x2F\x35\x2E\x30\x20\x28\x57\x69\x6E\x64\x6F\x77\x73\x20\x4E\x54\x20\x31\x30\x2E\x30\x3B\x20\x57\x69\x6E\x36\x34\x3B\x20\x78\x36\x34\x29\x20\x41\x70\x70\x6C\x65\x57\x65\x62\x4B\x69\x74\x2F\x35\x33\x37\x2E\x33\x36\x20\x28\x4B\x48\x54\x4D\x4C\x2C\x20\x63\x6F\x6D\x6F\x20\x47\x65\x63\x6B\x6F\x29\x20\x43\x68\x72\x6F\x6D\x65\x2F\x39\x31\x2E\x30\x2E\x34\x34\x37\x32\x2E\x31\x32\x34\x20\x53\x61\x66\x61\x72\x69\x2F\x35\x33\x37\x2E\x33\x36','\x72\x65\x71\x75\x65\x73\x74','\x64\x61\x74\x61','\x73\x75\x63\x63\x65\x73\x73','\x69\x64','\x74\x69\x74\x6C\x65','\x69\x6E\x66\x6F','\x69\x6D\x61\x67\x65','\x63\x65\x6B\x50\x72\x6F\x67\x72\x65\x73\x73','\x64\x6F\x77\x6E\x6C\x6F\x61\x64\x55\x72\x6C','\x46\x61\x6C\x6C\x6F\x20\x61\x6C\x20\x6F\x62\x74\x65\x6E\x65\x72\x20\x6C\x6F\x73\x20\x64\x65\x74\x61\x6C\x6C\x65\x73\x20\x64\x65\x6C\x20\x76\x69\x64\x65\x6F\x2E','\x45\x72\x72\x6F\x72\x3A','\x63\x6F\x6E\x73\x6F\x6C\x65','\x65\x72\x72\x6F\x72','\x68\x74\x74\x70\x73\x3A\x2F\x2F\x70\x2E\x6F\x63\x65\x61\x6E\x73\x61\x76\x65\x72\x2E\x69\x6E\x2F\x61\x6A\x61\x78\x2F\x70\x72\x6F\x67\x72\x65\x73\x73\x2E\x70\x68\x70\x3F\x69\x64\x3D','\x70\x72\x6F\x67\x72\x65\x73\x73','\x64\x6F\x77\x6E\x6C\x6F\x61\x64\x5F\x75\x72\x6C','\x6E\x6F\x64\x65\x2D\x66\x65\x74\x63\x68','\x74\x72\x69\x6D','\x63\x68\x61\x74','\x72\x65\x70\x6C\x79','\x2A\x5B\xE2\x9D\x97\xEF\xB8\x8F\x49\x4E\x46\x4F\xE2\x9D\x97\xEF\xB8\x8F\x5D\x20\xCA\x98\x49\x4E\x53\x45\x52\x54\x45\x20\x45\x4C\x20\x43\x4F\x4D\x41\x4E\x44\x4F\x20\x4D\x41\x53\x20\x45\x4C\x20\x45\x4E\x4C\x41\x43\x45\x20\x2F\x20\x4C\x49\x4E\x4B\x20\x44\x45\x20\x55\x4E\x20\x56\x49\x44\x45\x4F\x20\x44\x45\x20\x59\x4F\x55\x54\x55\x42\x45\x2A','\x61\x6C\x6C','\x6D\x2E\x72\x65\x70\x6C\x79','\x2A\x5B\xE2\x9D\x97\x5D\x20\xCA\x98\x52\x52\x4F\x52\x20\x4E\x4F\x20\x46\x55\x45\x20\x50\x4F\x53\x49\x42\x4C\x45\x20\x44\x45\x53\x43\x41\x52\x47\x41\x52\x20\x45\x4C\x20\x56\x49\x44\x45\x4F\x2A','\x74\x68\x75\x6D\x62\x6E\x61\x69\x6C','\x74\x69\x6D\x65\x73\x74\x61\x6D\x70','\x76\x69\x65\x77\x73','\x61\x67\x6F','\x75\x72\x6C','\x66\x6F\x72\x6D\x61\x74\x56\x69\x65\x77\x73','\x20\x54\x49\x54\x55\x4C\x4F\x3A\x20','\x67\x65\x74\x46\x69\x6C\x65','\x64\x61\x74\x61','\x61\x75\x74\x68\x6F\x72','\x6E\x61\x6D\x65','\x44\x65\x73\x63\x6F\x6E\x6F\x63\x69\x64\x6F','\x65\x78\x74\x65\x72\x6E\x61\x6C\x41\x64\x52\x65\x70\x6C\x79','\x62\x6F\x64\x79','\x6D\x65\x64\x69\x61\x54\x79\x70\x65','\x70\x72\x65\x76\x69\x65\x77\x54\x79\x70\x65','\x6D\x65\x64\x69\x61\x55\x72\x6C','\x73\x6F\x75\x72\x63\x65\x55\x72\x6C','\x74\x68\x75\x6D\x62\x6E\x61\x69\x6C','\x72\x65\x6E\x64\x65\x72\x4C\x61\x72\x67\x65\x72\x54\x68\x75\x6D\x62\x6E\x61\x69\x6C','\x79\x74\x6D\x70\x33','\x61\x75\x64\x69\x6F','\x6D\x69\x6D\x65\x74\x79\x70\x65','\x61\x75\x64\x69\x6F\x2F\x6D\x70\x65\x67','\x79\x74\x6D\x70\x34','\x68\x74\x74\x70\x73\x3A\x2F\x2F\x61\x70\x69\x2E\x73\x69\x70\x75\x74\x7A\x78\x2E\x6D\x79\x2E\x69\x64\x2F\x61\x70\x69\x2F\x64\x2F\x79\x74\x6D\x70\x34\x3F\x75\x72\x6C\x3D','\x68\x74\x74\x70\x73\x3A\x2F\x2F\x61\x70\x69\x2E\x7A\x65\x6E\x6B\x65\x79\x2E\x6D\x79\x2E\x69\x64\x2F\x61\x70\x69\x2F\x64\x6F\x77\x6E\x6C\x6F\x61\x64\x2F\x79\x74\x6D\x70\x34\x3F\x61\x70\x69\x6B\x65\x79\x3D\x7A\x65\x6E\x6B\x65\x79\x26\x75\x72\x6C\x3D','\x68\x74\x74\x70\x73\x3A\x2F\x2F\x61\x78\x65\x65\x6C\x2E\x6D\x79\x2E\x69\x64\x2F\x61\x70\x69\x2F\x64\x6F\x77\x6E\x6C\x6F\x61\x64\x2F\x76\x69\x64\x65\x6F\x3F\x75\x72\x6C\x3D','\x68\x74\x74\x70\x73\x3A\x2F\x2F\x64\x65\x6C\x69\x72\x69\x75\x73\x2D\x61\x70\x69\x6F\x66\x63\x2E\x76\x65\x72\x63\x65\x6C\x2E\x61\x70\x70\x2F\x64\x6F\x77\x6E\x6C\x6F\x61\x64\x2F\x79\x74\x6D\x70\x34\x3F\x75\x72\x6C\x3D','\x66\x65\x74\x63\x68','\x6A\x73\x6F\x6E','\x64\x6C','\x72\x65\x73\x75\x6C\x74','\x64\x6F\x77\x6E\x6C\x6F\x61\x64\x73','\x66\x69\x6C\x65\x4E\x61\x6D\x65','\x6D\x70\x34','\x6D\x69\x6D\x65\x74\x79\x70\x65','\x76\x69\x64\x65\x6F\x2F\x6D\x70\x34','\x63\x61\x70\x74\x69\x6F\x6E','\x4E\x6F\x20\x73\x65\x20\x70\x75\x64\x6F\x20\x64\x65\x73\x63\x61\x72\x67\x61\x72\x20\x65\x6C\x20\x76\x69\x64\x65\x6F\x3A\x2A\x20\x4E\x6F\x20\x73\x65\x20\x65\x6E\x63\x6F\x6E\x74\x72\x6F\x20\x75\x6E\x20\x65\x6E\x6C\x61\x63\x65\x20\x64\x65\x20\x64\x65\x73\x63\x61\x72\x67\x61\x20\x76\xC3\xA1\x6C\x69\x64\x6F\x2E','\x43\x6F\x6D\x61\x6E\x64\x6F\x20\x6E\x6F\x20\x72\x65\x63\x6F\x6E\x6F\x63\x69\x64\x6F\x2E','\x45\x72\x72\x6F\x72\x3A\x2A\x20','\x6D\x65\x73\x73\x61\x67\x65','\x63\x6F\x6D\x6D\x61\x6E\x64','\x68\x65\x6C\x70','\x74\x61\x67\x73','\x64\x6C','\x67\x72\x6F\x75\x70','\x74\x6F\x53\x74\x72\x69\x6E\x67'];const formatAudio=[_0x5078[0],_0x5078[1],_0x5078[2],_0x5078[3],_0x5078[4],_0x5078[5],_0x5078[6],_0x5078[7]];const formatVideo=[_0x5078[8],_0x5078[9],_0x5078[10],_0x5078[11],_0x5078[12],_0x5078[13]];const ddownr={download:async(_0x5078x4,_0x5078x5)=>{if(!formatAudio[_0x5078x51](_0x5078x5)&&!formatVideo[_0x5078x51](_0x5078x5)){throw new Error(_0x5078[14])}const _0x5078x6={method:_0x5078[15],url:_0x5078[16]+_0x5078x5+_0x5078[17]+encodeURIComponent(_0x5078x4)+_0x5078[18],headers:{[_0x5078[19]]:_0x5078[20]}};try{const _0x5078x7=await _0x5078x3[_0x5078[21]](_0x5078x6);if(_0x5078x7[_0x5078[22]]&&_0x5078x7[_0x5078[22]][_0x5078[23]]){const{id:_0x5078x8,title:_0x5078x9,info:_0x5078xa}=_0x5078x7[_0x5078[22]];const{image:_0x5078xb}=_0x5078xa;const _0x5078xc=await ddownr[_0x5078[28]](_0x5078x8);return{id:_0x5078x8,image:_0x5078xb,title:_0x5078x9,downloadUrl:_0x5078xc}}else{throw new Error(_0x5078[30])}}catch(_0x5078xd){_0x5078[31][_0x5078[32]](_0x5078[33],_0x5078xd);throw _0x5078xd}},cekProgress:async(_0x5078xe)=>{const _0x5078xf={method:_0x5078[15],url:_0x5078[34]+_0x5078xe,headers:{[_0x5078[19]]:_0x5078[20]}};try{while(true){const _0x5078x10=await _0x5078x3[_0x5078[21]](_0x5078xf);if(_0x5078x10[_0x5078[22]]&&_0x5078x10[_0x5078[22]][_0x5078[23]]&&_0x5078x10[_0x5078[22]][_0x5078[35]]===0x3e8)return _0x5078x10[_0x5078[22]][_0x5078[36]];await new Promise(_0x5078x11=>setTimeout(_0x5078x11,0x1388))}}catch(_0x5078x12){_0x5078[31][_0x5078[32]](_0x5078[33],_0x5078x12);throw _0x5078x12}}};const handler=async(_0x5078x13,{conn:_0x5078x14,text:_0x5078x15,usedPrefix:_0x5078x16,command:_0x5078x17})=>{try{if(!_0x5078x15[_0x5078[38]]()){return _0x5078x14[_0x5078[40]](_0x5078x13[_0x5078[39]],_0x5078[41],_0x5078x13,rcanal)}const _0x5078x18=await _0x5078x2(_0x5078x15);if(!_0x5078x18[_0x5078[42]]||_0x5078x18[_0x5078[42]]['\x6C\x65\x6E\x67\x74\x68']===0x0)return _0x5078x13[_0x5078[43]](_0x5078[44]);const _0x5078x19=_0x5078x18[_0x5078[42]][0x0];const{title:_0x5078x1a,thumbnail:_0x5078x1b,timestamp:_0x5078x1c,views:_0x5078x1d,ago:_0x5078x1e,url:_0x5078x1f}=_0x5078x19;const _0x5078x20=formatViews(_0x5078x1d);const _0x5078x21='\x1b\x20\x54\x49\x54\x55\x4C\x4F\x3A\x20'+_0x5078x1a+'\x0A';const _0x5078x22=(await _0x5078x14[_0x5078[48]](_0x5078x1b))[_0x5078[49]];const _0x5078x23={contextInfo:{externalAdReply:{title:_0x5078x1a,body:_0x5078x19[_0x5078[50]][_0x5078[51]]||_0x5078[52],mediaType:0x1,previewType:0x0,mediaUrl:_0x5078x1f,sourceUrl:_0x5078x1f,thumbnail:_0x5078x22,renderLargerThumbnail:true}}};await _0x5078x14[_0x5078[40]](_0x5078x13[_0x5078[39]],_0x5078x21,_0x5078x13,rcanal);if(_0x5078x17===_0x5078[53]){const _0x5078x24=await ddownr[_0x5078[29]](_0x5078x1f,_0x5078[0]);const _0x5078x25=_0x5078x24[_0x5078[29]];await _0x5078x14[_0x5078[54]](_0x5078x13[_0x5078[39]],{audio:{url:_0x5078x25},mimetype:_0x5078[56]},{quoted:_0x5078x13})}else if(_0x5078x17===_0x5078[57]){let _0x5078x26=[_0x5078[58],_0x5078[59],_0x5078[60],_0x5078[61]];let _0x5078x27=false;for(let _0x5078x28 of _0x5078x26){try{const _0x5078x29=await _0x5078x1(_0x5078x28);const{data:_0x5078x2a,result:_0x5078x2b,downloads:_0x5078x2c}=await _0x5078x29[_0x5078[63]]();let _0x5078x2d=_0x5078x2a?_0x5078x2a[_0x5078[64]]:_0x5078x2b?_0x5078x2b[_0x5078[29]]?_0x5078x2b[_0x5078[29]]['\x75\x72\x6C']:'':_0x5078x2c?_0x5078x2c['\x75\x72\x6C']:_0x5078x2a?_0x5078x2a[_0x5078[29]]?_0x5078x2a[_0x5078[29]]['\x75\x72\x6C']:'':'';if(_0x5078x2d){_0x5078x27=true;await _0x5078x14[_0x5078[54]](_0x5078x13[_0x5078[39]],{video:{url:_0x5078x2d},fileName:_0x5078x1a+_0x5078[66],mimetype:_0x5078[68],caption:_0x5078[70]+_0x5078x1a+'\x0A',thumbnail:_0x5078x22},{quoted:_0x5078x13});break}}catch(_0x5078x2e){_0x5078[31][_0x5078[32]](_0x5078[33],_0x5078x2e[_0x5078[72]])}}if(!_0x5078x27)return _0x5078x13[_0x5078[43]](_0x5078[71])}else{throw _0x5078[73]}}catch(_0x5078x2f){return _0x5078x13[_0x5078[43]](_0x5078[74]+_0x5078x2f[_0x5078[72]])}};handler[_0x5078[75]]=handler[_0x5078[76]]=[_0x5078[53],_0x5078[57]];handler[_0x5078[77]]=[_0x5078[78]];handler[_0x5078[79]]=true;export default handler;function formatViews(_0x5078x30){if(_0x5078x30>=0x3e8)return(_0x5078x30/0x3e8)['\x74\x6F\x46\x69\x78\x65\x64'](0x1)+'\x6B\x20\x28'+_0x5078x30[_0x5078[51]]()+'\x29';else return _0x5078x30[_0x5078[80]]()}

import fetch from "node-fetch";
import yts from 'yt-search';
import axios from "axios";

const formatAudio = ['mp3', 'm4a', 'webm', 'acc', 'flac', 'opus', 'ogg', 'wav'];
const formatVideo = ['360', '480', '720', '1080', '1440', '4k'];

const ddownr = {
  download: async (url, format) => {
    if (!formatAudio.includes(format) && !formatVideo.includes(format)) {
      throw new Error('Formato no soportado, verifica la lista de formatos disponibles.');
    }

    const config = {
      method: 'GET',
      url: `https://p.oceansaver.in/ajax/download.php?format=${format}&url=${encodeURIComponent(url)}&api=dfcb6d76f2f6a9894gjkege8a4ab232222`,
      headers: {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, como Gecko) Chrome/91.0.4472.124 Safari/537.36'
      }
    };

    try {
      const response = await axios.request(config);

      if (response.data && response.data.success) {
        const { id, title, info } = response.data;
        const { image } = info;
        const downloadUrl = await ddownr.cekProgress(id);

        return {
          id: id,
          image: image,
          title: title,
          downloadUrl: downloadUrl
        };
      } else {
        throw new Error('Fallo al obtener los detalles del video.');
      }
    } catch (error) {
      console.error('Error:', error);
      throw error;
    }
  },
  cekProgress: async (id) => {
    const config = {
      method: 'GET',
      url: `https://p.oceansaver.in/ajax/progress.php?id=${id}`,
      headers: {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, como Gecko) Chrome/91.0.4472.124 Safari/537.36'
      }
    };

    try {
      while (true) {
        const response = await axios.request(config);

        if (response.data && response.data.success && response.data.progress === 1000) {
          return response.data.download_url;
        }
        await new Promise(resolve => setTimeout(resolve, 5000));
      }
    } catch (error) {
      console.error('Error:', error);
      throw error;
    }
  }
};

const handler = async (m, { conn, text, usedPrefix, command }) => {
  try {
    if (!text.trim()) {
      return conn.reply(m.chat, `*[❗𝐈𝐍𝐅𝐎❗] 𝙸𝙽𝚂𝙴𝚁𝚃𝙴 𝙴𝙻 𝙲𝙾𝙼𝙰𝙽𝙳𝙾 𝙼𝙰𝚂 𝙴𝙻 𝙴𝙽𝙻𝙰𝙲𝙴 / 𝙻𝙸𝙽𝙺 𝙳𝙴 𝚄𝙽 𝚅𝙸𝙳𝙴𝙾 𝙳𝙴 𝚈𝙾𝚄𝚃𝚄𝙱𝙴*`, m, rcanal);
    }

    const search = await yts(text);
    if (!search.all || search.all.length === 0) {
      return m.reply('*[❗] 𝙴𝚁𝚁𝙾𝚁 𝙽𝙾 𝙵𝚄𝙴 𝙿𝙾𝚂𝙸𝙱𝙻𝙴 𝙳𝙴𝚂𝙲𝙰𝚁𝙶𝙰𝚁 𝙴𝙻 𝚅𝙸𝙳𝙴𝙾*');
    }

    const videoInfo = search.all[0];
    const { title, thumbnail, timestamp, views, ago, url } = videoInfo;
    const vistas = formatViews(views);
    const infoMessage = `▢ 𝚃𝙸𝚃𝚄𝙻𝙾: ${title}\n`;
    const thumb = (await conn.getFile(thumbnail))?.data;

    const JT = { contextInfo: { isForwarded: true, forwardedNewsletterMessageInfo: { newsletterJid: channelid, serverMessageId: 100, newsletterName: channelname, }, externalAdReply: { showAdAttribution: true, title: title, body: `${videoInfo.author.name || 'Desconocido'}`, mediaUrl: url, description: null, previewType: "PHOTO", thumbnailUrl: thumb, sourceUrl: url, mediaType: 1, renderLargerThumbnail: true }, }, }
    const nombre = await conn.getName(m.sender)
    const HT = {
      contextInfo: {
        externalAdReply: {
          title: title,
          body: `${videoInfo.author.name || 'Desconocido'}`,
          mediaType: 1,
          previewType: 0,
          mediaUrl: url,
          sourceUrl: url,
          thumbnail: thumb,
          renderLargerThumbnail: true,
        },
      },
    };

    await conn.reply(m.chat, infoMessage, m, JT);

    if (command === 'ytmp3') {
        const api = await ddownr.download(url, 'mp3');
        const result = api.downloadUrl;
        await conn.sendMessage(m.chat, { audio: { url: result }, mimetype: "audio/mpeg", contextInfo: { externalAdReply: HT },}, { quoted: m });
          await conn.sendMessage(channelid, { text: `╭─────────────⦁\n│╭➟ ≡ El Usuario ${nombre}\n││➟ ▢ A Usado El Comando ${usedPrefix + command}\n│╰➟ ⌬ Ꭱꭼꮇ Ꮯꮋꭺɴ Ꮃꮋꭺ - Ᏼꮻꭲ\n╰─────────────⦁`, contextInfo: {
externalAdReply: {
title: "【 🔔 𝗡𝗢𝗧𝗜𝗙𝗜𝗖𝗔𝗖𝗜𝗢́𝗡 🔔 】",
body: '🤖 Uso De Un Comando 📥',
thumbnailUrl: 'https://files.catbox.moe/qtdb1u.jpg',
sourceUrl: 'https://dash.host-cuervo.shop',
mediaType: 1,
showAdAttribution: false,
renderLargerThumbnail: false
}}}, { quoted: null })

    } else if (command === 'ytmp4') {
      let sources = [
        `https://api.siputzx.my.id/api/d/ytmp4?url=${url}`,
        `https://api.zenkey.my.id/api/download/ytmp4?apikey=zenkey&url=${url}`,
        `https://axeel.my.id/api/download/video?url=${encodeURIComponent(url)}`,
        `https://delirius-apiofc.vercel.app/download/ytmp4?url=${url}`
      ];

      let success = false;
      for (let source of sources) {
        try {
          const res = await fetch(source);
          const { data, result, downloads } = await res.json();
          let downloadUrl = data?.dl || result?.download?.url || downloads?.url || data?.download?.url;

          if (downloadUrl) {
            success = true;
            await conn.sendMessage(m.chat, {
              video: { url: downloadUrl },
              fileName: `${title}.mp4`,
              mimetype: 'video/mp4',
              contextInfo: { externalAdReply: HT },
              caption: `▢ 𝚃𝙸𝚃𝚄𝙻𝙾: ${title}\n`,
              thumbnail: thumb
            }, { quoted: m });
              await conn.sendMessage(channelid, { text: `╭─────────────⦁\n│╭➟ ≡ El Usuario ${nombre}\n││➟ ▢ A Usado El Comando ${usedPrefix + command}\n│╰➟ ⌬ Ꭱꭼꮇ Ꮯꮋꭺɴ Ꮃꮋꭺ - Ᏼꮻꭲ\n╰─────────────⦁`, contextInfo: {
externalAdReply: {
title: "【 🔔 𝗡𝗢𝗧𝗜𝗙𝗜𝗖𝗔𝗖𝗜𝗢́𝗡 🔔 】",
body: '🤖 Uso De Un Comando 📥',
thumbnailUrl: 'https://files.catbox.moe/qtdb1u.jpg',
sourceUrl: 'https://dash.host-cuervo.shop',
mediaType: 1,
showAdAttribution: false,
renderLargerThumbnail: false
}}}, { quoted: null })
            break;
          }
        } catch (e) {
          console.error(`Error con la fuente ${source}:`, e.message);
        }
      }

      if (!success) {
        return m.reply(`*No se pudo descargar el video:* No se encontró un enlace de descarga válido.`);
      }
    } else {
      throw "Comando no reconocido.";
    }
  } catch (error) {
    return m.reply(`*Error:* ${error.message}`);
  }
};

handler.command = handler.help = ['ytmp3', 'ytmp4'];
handler.tags = ['dl'];
handler.group = true;
export default handler;

function formatViews(views) {
  if (views >= 1000) {
    return (views / 1000).toFixed(1) + 'k (' + views.toLocaleString() + ')';
  } else {
    return views.toString();
  }
}