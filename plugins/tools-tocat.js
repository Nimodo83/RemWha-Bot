/* ARCHIVO EDITADO , CREADO O MEJORADO
POR EL CUERVO 
CUERVO-TEAM-SUPREME 
SE DEJAN CREDITOS PERRAS ES DE CUERVO 
USO NO PRIVADO ES PUBLICO
PERO CUERVO SE ENCARGA 
*/
//import _0x3010x1 from '\x6E\x6F\x64\x65\x2D\x66\x65\x74\x63\x68';
//import _0x3010x2 from '\x63\x72\x79\x70\x74\x6F';
//import {FormData as _0x3010x3,Blob as _0x3010x4} from '\x66\x6F\x72\x6D\x64\x61\x74\x61\x2D\x6E\x6F\x64\x65';
//import {fileTypeFromBuffer as _0x3010x5} from '\x66\x69\x6C\x65\x2D\x74\x79\x70\x65';
//const _0x3010=['\x71\x75\x6F\x74\x65\x64','\x6D\x73\x67','\x6D\x69\x6D\x65\x74\x79\x70\x65','\x63\x68\x61\x74','\x72\x65\x70\x6C\x79','\x26\x69\x6E\x73\x74\x3B\x20\x2A\x41\x63\x6C\x61\x72\x61\x63\x69\xC3\xB3\x6E\x3A\x20\x50\x61\x72\x61\x20\x63\x6F\x6E\x74\x69\x6E\x75\x61\x72\x2C\x20\x65\x73\20\x6E\x65\x63\x65\x73\x61\x72\x69\x6F\20\x71\x75\x65\20\x65\x6E\x76\xC3\xAD\x65\x73\20\x75\x6E\x61\20\x69\x6D\x61\x67\x65\x2C\20\x76\xC3\xAD\x64\x65\x6F\x2C\20\x61\x75\x64\x69\x6F\20\x6F\20\x67\x69\x66\x2E\20\x50\x6F\x72\20\x66\x61\x76\x6F\x72\x2C\20\x61\x73\x65\x67\xC3\xBA\x72\x61\x74\x65\20\x64\x65\20\x68\x61\x63\x65\x72\x6C\x6F\20\x61\x6E\x74\x65\x73\20\x64\x65\20\x75\x74\x69\x6C\x69\x7A\x61\x72\20\x65\x6C\20\x63\x6F\x6D\x61\x6E\x64\20\x6E\x75\x65\x76\x61\x6D\x65\x6E\x74\x65\x2E\20\xC2\xA1\x47\x72\x61\x63\x69\x61\x73\x21\x2A','\x64\x6F\x77\x6E\x6C\x6F\x61\x64','\x74\x65\x78\x74','\x4C\x20\x49\x4E\x4B\x20\x44\x45\x20\x41\x43\x43\x45\x53\x4F\x20\x3A','\x54\x41\x4D\x41\xC3\x91\x4F\x20\x44\x45\x4C\x20\x41\x52\x43\x48\x49\x56\x4F\x20\x3A','\x6C\x65\x6E\x67\x74\x68','\x56\x41\x4C\x49\x44\x45\x5A\x20\x44\x45\x4C\x20\x45\x4E\x4C\x41\x43\x45\x20\x3A','\x72\x65\x70\x6C\x79','\x63\x6F\x6D\x6D\x61\x6E\x64','\x68\x65\x6C\x70','\x74\x6F\x63\x61\x74','\x74\x61\x67\x73','\x74\x6F\x6F\x6C\x73','\x67\x72\x6F\x75\x70','\x42','\x4B\x42','\x4D\x42','\x47\x42','\x54\x42','\x66\x6C\x6F\x6F\x72','\x6C\x6F\x67','\x74\x6F\x41\x72\x72\x61\x79\x42\x75\x66\x66\x65\x72','\x74\x79\x70\x65','\x72\x61\x6E\x64\x6F\x6D\x42\x79\x74\x65\x73','\x74\x6F\x53\x74\x72\x69\x6E\x67','\x68\x65\x78','\x61\x70\x70\x65\x6E\x64','\x72\x65\x71\x74\x79\x70\x65','\x66\x69\x6C\x65\x75\x70\x6C\x6F\x61\x64','\x66\x69\x6C\x65\x54\x6F\x55\x70\x6C\x6F\x61\x64','\x68\x74\x74\x70\x73\x3A\x2F\x2F\x63\x61\x74\x62\x6F\x78\x2E\x6D\x6F\x65\x2F\x75\x73\x65\x72\x2F\x61\x70\x69\x2E\x70\x68\x70','\x50\x4F\x53\x54','\x62\x6F\x64\x79','\x68\x65\x61\x64\x65\x72\x73','\x55\x73\x65\x72\x2D\x41\x67\x65\x6E\x74','\x4D\x6F\x7A\x69\x6C\x6C\x61\x2F\x35\x2E\x30\x20\x28\x58\x31\x31\x3B\x20\x4C\x69\x6E\x75\x78\x20\x78\x38\x36\x5F\x36\x34\x29\x20\x41\x70\x70\x6C\x65\x57\x65\x62\x4B\x69\x74\x2F\x35\x33\x37\x2E\x33\x36\x20\x28\x4B\x48\x54\x4D\x4C\x2C\x20\x6C\x69\x6B\x65\x20\x47\x65\x63\x6B\x6F\x29\x20\x43\x68\x72\x6F\x6D\x65\x2F\x34\x34\x2E\x30\x2E\x32\x34\x30\x33\x2E\x31\x35\x37\x20\x53\x61\x66\x61\x72\x69\x2F\x35\x33\x37\x2E\x33\x36','\x74\x65\x78\x74'];let handler=async(_0x3010x6,{conn:_0x3010x7})=>{let _0x3010x8=_0x3010x6[_0x3010[0]]?_0x3010x6[_0x3010[0]]:_0x3010x6;let _0x3010x9=(_0x3010x8[_0x3010[1]]||_0x3010x8)[_0x3010[2]]||'';if(!_0x3010x9)return _0x3010x7[_0x3010[4]](_0x3010x6[_0x3010[3]],_0x3010[5],_0x3010[26],{[_0x3010[0]]:_0x3010x6});let _0x3010xa=await _0x3010x8[_0x3010[6]]();let _0x3010xb=await catbox(_0x3010xa);let _0x3010xc=`\x26\x69\x6E\x73\x74\x3B\x20\x2A\x4C\x20\x49\x4E\x4B\x20\x44\x45\x20\x41\x43\x43\x45\x53\x4F\x20\x3A\x2A\n\x20\`\`\`\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x62\x61\x63\x6B\x20\x64\x6F\x6F\x72\x73\x20\x6F\x75\x74\x73\x69\x64\x65\x20\x77\x69\x74\x68\x20\x66\x6C\x6F\x77\x65\x72\x73\x20\x61\x6E\x64\x20\x66\x6C\x6F\x77\x65\x72\x20\x62\x65\x64\x73\x20\x61\x6C\x6C\x20\x61\x72\x6F\x75\x6E\x64\x20\x61\x20\x73\x68\x65\x64\x20\x6F\x72\x20\x62\x75\x69\x6C\x64\x69\x6E\x67\x20\x69\x73\20\x76\x69\x73\x69\x62\x6C\x65\x20\x69\x6E\20\x74\x68\x65\20\x62\x61\x63\x6B\x67\x72\x6F\x75\x6E\x64\x20\x6A\x75\x73\x74\20\x74\x6F\20\x74\x68\x65\20\x72\x69\x67\x68\x74\20\x6F\x66\20\x74\x68\x65\20\x69\x6D\x61\x67\x65\x20\x61\x6E\x64\20\x61\20\x67\x61\x72\x64\x65\x6E\x20\x69\x73\20\x76\x69\x73\x69\x62\x6C\x65\20\x69\x6E\20\x74\x68\x65\20\x62\x61\x63\x6B\x67\x72\x6F\x75\x6E\x64\x20\x6A\x75\x73\x74\20\x74\x6F\20\x74\x68\x65\20\x6C\x65\x66\x74\x20\x6F\x66\20\x74\x68\x65\20\x69\x6D\x61\x67\x65\x20\x61\x6E\x64\20\x69\x74\20\x6C\x6F\x6F\x6B\x73\20\x6C\x69\x6B\x65\20\x61\20\x6E\x69\x63\x65\20\x61\x6E\x64\20\x73\x65\x72\x65\x6E\x65\20\x65\x6E\x76\x69\x72\x6F\x6E\x6D\x65\x6E\x74','\x63\x6F\x6E\x74\x65\x6E\x74','\x64\x61\x74\x61','\x63\x6F\x6E\x74\x65\x6E\x74','\x63\x6F\x6E\x74\x65\x6E\x74'];let handler=async(_0x3010x6,{conn:_0x3010x7})=>{let _0x3010x8=_0x3010x6[_0x3010[0]]?_0x3010x6[_0x3010[0]]:_0x3010x6;let _0x3010x9=(_0x3010x8[_0x3010[1]]||_0x3010x8)[_0x3010[2]]||'';if(!_0x3010x9)return _0x3010x7[_0x3010[4]](_0x3010x6[_0x3010[3]],_0x3010[5],_0x3010[26],{[_0x3010[0]]:_0x3010x6});let _0x3010xa=await _0x3010x8[_0x3010[6]]();let _0x3010xb=await catbox(_0x3010xa);let _0x3010xc=`\x26\x69\x6E\x73\x74\x3B\x20\x2A${_0x3010[8]}\x20\x3A\x2A\n\x20\`\`\`\x20\xE2\x80\xA2\x20${_0x3010xb}\`\`\`\n\xF0\x9F\x9A\xB8\x20\x2A${_0x3010[9]}\x20\x3A\x2A\x20${formatBytes(_0x3010xa[_0x3010[10]])}\n\xF0\x9F\x9A\xB8\x20\x2A${_0x3010[11]}\x20\x3A\x2A\x20\x22\x53\x69\x6E\x20\x66\x65\x63\x68\x61\20\x64\x65\20\x63\x61\x64\x75\x63\x69\x64\x61\x64\x22\x20\n`;await _0x3010x6[_0x3010[12]](_0x3010xc)};handler[_0x3010[13]]=handler[_0x3010[14]]=[_0x3010[15]];handler[_0x3010[16]]=[_0x3010[17]];handler[_0x3010[18]]=true;export default handler;function formatBytes(_0x3010x1d){if(_0x3010x1d===0x0)return _0x3010[19];const _0x3010x1e=[_0x3010[19],_0x3010[20],_0x3010[21],_0x3010[22],_0x3010[23]];const _0x3010x1f=Math[_0x3010[24]](Math[_0x3010[25]](_0x3010x1d)/Math[_0x3010[25]](0x400));return `${(_0x3010x1d/0x400**_0x3010x1f).toFixed(0x2)}\x20${_0x3010x1e[_0x3010x1f]}`}async function catbox(_0x3010x20){const {ext:_0x3010x21,mime:_0x3010x22}=await _0x3010x5(_0x3010x20)||{};const _0x3010x23=new _0x3010x4(_0x3010x20[_0x3010[26]](),{[_0x3010[27]]:_0x3010x22});const _0x3010x24=new _0x3010x3();const _0x3010x25=_0x3010x2[_0x3010[28]](0x5)[_0x3010[29]](_0x3010[30]);_0x3010x24[_0x3010[31]](_0x3010[32],_0x3010[33]);_0x3010x24[_0x3010[31]](_0x3010[34],_0x3010x23,_0x3010x25+'.'+_0x3010x21);const _0x3010x27=await _0x3010x1[_0x3010[35]](_0x3010[36],{method:_0x3010[37],[_0x3010[38]]:_0x3010x24,[_0x3010[39]]:{[_0x3010[40]]:_0x3010[41]}});return await _0x3010x27[_0x3010[7]]()}

import fetch from "node-fetch";
import crypto from "crypto";
import { FormData, Blob } from "formdata-node";
import { fileTypeFromBuffer } from "file-type";

const handler = async (m, { conn }) => {
const nombre = await conn.getName(m.sender)
let q = m.quoted ? m.quoted : m;
  let mime = (q.msg || q).mimetype || "";
  if (!mime) return conn.reply(m.chat,  "âœ *_AtenciÃ³n: Para continuar, es necesario que envÃ­es una imagen, vÃ­deo, audio o gif. Por favor, asegÃºrate de hacerlo antes de utilizar el comando nuevamente. Â¡Gracias!_*", null, { quoted: m });
  let media = await q.download();
let link = await catbox(media);
  let caption = `âœ *L I N K DE ACCESO :*
 \`\`\`â€¢ ${link}\`\`\`
ğŸœ¸ *T A M A Ã‘ O DEL ARCHIVO :* ${formatBytes(media.length)}
ğŸœ¸ *V A L I D E Z DEL ENLACE :* *"Sin fecha de caducidad"* 
`;

  await conn.sendFile(m.chat, link, 'img-error.jpg', caption, m, null, rcanal);
    await conn.sendMessage(channelid, { text: `â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â¦\nâ”‚â•­âŸ â‰¡ El Usuario ${nombre}\nâ”‚â”‚âŸ â–¢ A Usado El Comando ${usedPrefix + command}\nâ”‚â•°âŸ âŒ¬ á¡ê­¼ê®‡ áŸê®‹ê­ºÉ´ á³ê®‹ê­º - á´ê®»ê­²`, contextInfo: {
externalAdReply: {
title: "ã€ ğŸ”” ğ—¡ğ—¢ğ—§ğ—œğ—™ğ—œğ—–ğ—”ğ—–ğ—œğ—¢Ìğ—¡ ğŸ”” ã€‘",
body: 'ğŸ¤– Uso De Un Comando ğŸ“¥',
thumbnailUrl: 'https://files.catbox.moe/qtdb1u.jpg',
sourceUrl: 'https://dash.host-cuervo.shop',
mediaType: 1,
showAdAttribution: false,
renderLargerThumbnail: false
}}}, { quoted: null })
}
handler.command = handler.help = ['tocat']
handler.tags = ['tools']
handler.group = true
export default handler


function formatBytes(bytes) {
  if (bytes === 0) {
    return "0 B";
  }
  const sizes = ["B", "KB", "MB", "GB", "TB"];
  const i = Math.floor(Math.log(bytes) / Math.log(1024));
  return `${(bytes / 1024 ** i).toFixed(2)} ${sizes[i]}`;
}


 /*
 * Upload image to catbox
 * Supported mimetype:
 * - `image/jpeg`
 * - `image/jpg`
 * - `image/png`s
 * - `image/webp`
 * - `video/mp4`
 * - `video/gif`
 * - `audio/mpeg`
 * - `audio/opus`
 * - `audio/mpa`
 * @param {Buffer} buffer Image Buffer
 * @return {Promise<string>}
 */
async function catbox(content) {
  const { ext, mime } = (await fileTypeFromBuffer(content)) || {};
  const blob = new Blob([content.toArrayBuffer()], { type: mime });
  const formData = new FormData();
  const randomBytes = crypto.randomBytes(5).toString("hex");
  formData.append("reqtype", "fileupload");
  formData.append("fileToUpload", blob, randomBytes + "." + ext);

  const response = await fetch("https://catbox.moe/user/api.php", {
    method: "POST",
    body: formData,
    headers: {
      "User-Agent":
        "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.157 Safari/537.36",
    },
  });

  return await response.text();
}
