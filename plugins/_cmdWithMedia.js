//var _0x56a4=["\x62\x75\x74\x74\x6F\x6E\x73\x52\x65\x73\x70\x6F\x6E\x73\x65\x4D\x65\x73\x73\x61\x67\x65","\x69\x73\x42\x61\x69\x6C\x65\x79\x73","\x6D\x65\x73\x73\x61\x67\x65","\x74\x65\x6D\x70\x6C\x61\x74\x65\x42\x75\x74\x74\x6F\x6E\x52\x65\x70\x6C\x79\x4D\x65\x73\x73\x61\x67\x65","\x6C\x69\x73\x74\x52\x65\x73\x70\x6F\x6E\x73\x65\x4D\x65\x73\x73\x61\x67\x65","\x69\x6E\x74\x65\x72\x61\x63\x74\x69\x76\x65\x52\x65\x73\x70\x6F\x6E\x73\x65\x4D\x65\x73\x73\x61\x67\x65","\x73\x65\x6C\x65\x63\x74\x65\x64\x42\x75\x74\x74\x6F\x6E\x49\x64","\x73\x65\x6C\x65\x63\x74\x65\x64\x49\x64","\x73\x69\x6E\x67\x6C\x65\x53\x65\x6C\x65\x63\x74\x52\x65\x70\x6C\x79","\x73\x65\x6C\x65\x63\x74\x65\x64\x52\x6F\x77\x49\x64","\x70\x61\x72\x61\x6D\x73\x4A\x73\x6F\x6E","\x69\x64","\x73\x65\x6C\x65\x63\x74\x65\x64\x44\x69\x73\x70\x6C\x61\x79\x54\x65\x78\x74","\x74\x69\x74\x6C\x65","\x70\x6C\x75\x67\x69\x6E\x73","\x72\x65\x73\x74\x72\x69\x63\x74","\x74\x61\x67\x73","\x69\x6E\x63\x6C\x75\x64\x65\x73","\x61\x64\x6D\x69\x6E","\x63\x6F\x6D\x6D\x61\x6E\x64","\x72\x65\x70\x6C\x61\x63\x65","\x7C\x5C\x7B\x7D\x5C\x28\x5C\x29\x5B\x5C\x5D\x5E\x2B\x24\x2A\x3F\x2E","\x24\x26","\x63\x75\x73\x74\x6F\x6D\x50\x72\x65\x66\x69\x78","\x70\x72\x65\x66\x69\x78","\x65\x78\x65\x63","\x6D\x61\x70","\x74\x65\x73\x74","\x73\x6F\x6D\x65","\x74\x72\x69\x6D","\x73\x70\x6C\x69\x74","\x66\x69\x6C\x74\x65\x72","\x6C\x6F\x77\x65\x72\x43\x61\x73\x65","\x67\x65\x6E\x65\x72\x61\x74\x65\x57\x41\x4D\x65\x73\x73\x61\x67\x65","\x6D\x65\x6E\x74\x69\x6F\x6E\x73","\x75\x73\x65\x72\x4A\x69\x64","\x75\x73\x65\x72","\x71\x75\x6F\x74\x65\x64","\x66\x61\x6B\x65\x4F\x62\x6A","\x66\x72\x6F\x6D\x4D\x65","\x73\x65\x6E\x64\x65\x72","\x69\x64","\x70\x75\x73\x68\x4E\x61\x6D\x65","\x6E\x61\x6D\x65","\x69\x73\x47\x72\x6F\x75\x70","\x70\x61\x72\x74\x69\x63\x69\x70\x61\x6E\x74","\x66\x72\x6F\x6D\x4F\x62\x6A\x65\x63\x74","\x63\x6F\x6E\x6E","\x65\x76","\x65\x6D\x69\x74","\x6D\x65\x73\x73\x61\x67\x65\x73\x2E\x75\x70\x73\x65\x72\x74","\x61\x70\x70\x65\x6E\x64"];const{proto:proto,generateWAMessage:generateWAMessage,areJidsSameUser:areJidsSameUser,decryptPollVote:decryptPollVote}=(await import(_0x56a4[49])).default;export async function all(_0x56a4x2,_0x56a4x3){var _0x56a4x4=_0x56a4[0];const _0x56a4x5=0x0;const _0x56a4x6=0x1;const _0x56a4x7=0x2;const _0x56a4x8=0x3;const _0x56a4x9=0x4;const _0x56a4xa=0x5;const _0x56a4xb=0x6;const _0x56a4xc=0x7;const _0x56a4xd=0x8;const _0x56a4xe=0x9;const _0x56a4xf=0xa;const _0x56a4x10=0xb;const _0x56a4x11=0xc;const _0x56a4x12=0xd;const _0x56a4x13=0xe;const _0x56a4x14=0xf;const _0x56a4x15=0x10;const _0x56a4x16=0x11;const _0x56a4x17=0x12;const _0x56a4x18=0x13;const _0x56a4x19=0x14;const _0x56a4x1a=0x15;const _0x56a4x1b=0x16;const _0x56a4x1c=0x17;const _0x56a4x1d=0x18;const _0x56a4x1e=0x19;const _0x56a4x1f=0x1a;const _0x56a4x20=0x1b;const _0x56a4x21=0x1c;const _0x56a4x22=0x1d;const _0x56a4x23=0x1e;const _0x56a4x24=0x1f;const _0x56a4x25=0x20;const _0x56a4x26=0x21;const _0x56a4x27=0x22;const _0x56a4x28=0x23;const _0x56a4x29=0x24;const _0x56a4x2a=0x25;const _0x56a4x2b=0x26;const _0x56a4x2c=0x27;const _0x56a4x2d=0x28;const _0x56a4x2e=0x29;const _0x56a4x2f=0x2a;const _0x56a4x30=0x2b;const _0x56a4x31=0x2c;const _0x56a4x32=0x2d;const _0x56a4x33=0x2e;if(_0x56a4x2[_0x56a4[1]]){return}if(!_0x56a4x2[_0x56a4[2]]){return}if(!(_0x56a4x2[_0x56a4[2]][_0x56a4x4]||_0x56a4x2[_0x56a4[2]][_0x56a4[3]]||_0x56a4x2[_0x56a4[2]][_0x56a4[4]]||_0x56a4x2[_0x56a4[2]][_0x56a4[5]])){return}let _0x56a4x34;if(_0x56a4x2[_0x56a4[2]][_0x56a4x4]){_0x56a4x34=_0x56a4x2[_0x56a4[2]][_0x56a4x4][_0x56a4[6]]}else if(_0x56a4x2[_0x56a4[2]][_0x56a4[3]]){_0x56a4x34=_0x56a4x2[_0x56a4x2][_0x56a4[3]][_0x56a4[7]]}else if(_0x56a4x2[_0x56a4[2]][_0x56a4[4]]){_0x56a4x34=_0x56a4x2[_0x56a4[2]][_0x56a4[4]][_0x56a4[8]]?_0x56a4x2[_0x56a4[2]][_0x56a4[4]][_0x56a4[8]][_0x56a4[9]]:null}else if(_0x56a4x2[_0x56a4[2]][_0x56a4[5]]){_0x56a4x34=JSON[_0x56a4[26]](_0x56a4x2[_0x56a4[2]][_0x56a4[5]]['nativeFlowResponseMessage'][_0x56a4[10]])[_0x56a4[11]]}const _0x56a4x35=_0x56a4x2[_0x56a4[2]][_0x56a4x4]?_0x56a4x2[_0x56a4[2]][_0x56a4x4][_0x56a4[12]]:_0x56a4x2[_0x56a4[2]][_0x56a4[3]]?_0x56a4x2[_0x56a4x2][_0x56a4[3]][_0x56a4[12]]:_0x56a4x2[_0x56a4[2]][_0x56a4[4]]?_0x56a4x2[_0x56a4[2]][_0x56a4[4]][_0x56a4[13]]:null;let _0x56a4x36=false;let _0x56a4x37;for(const _0x56a4x38 in global[_0x56a4[14]]){const _0x56a4x39=global[_0x56a4[14]][_0x56a4x38];if(!_0x56a4x39){continue}if(_0x56a4x39[_0x56a4[42]]){continue}if(!opts[_0x56a4[15]]){if(_0x56a4x39[_0x56a4[16]]&&_0x56a4x39[_0x56a4[16]][_0x56a4[17]](_0x56a4[18])){continue}}if(typeof _0x56a4x39!==_0x56a4[50]){continue}if(!_0x56a4x39[_0x56a4[19]]){continue}const _0x56a4x3a=(_0x56a4x42)=>_0x56a4x42[_0x56a4[20]](new RegExp(_0x56a4[21],_0x56a4[22]),_0x56a4[23]);const _0x56a4x3b=_0x56a4x39[_0x56a4[24]]?_0x56a4x39[_0x56a4[24]]:this[_0x56a4[25]]?this[_0x56a4[25]]:global[_0x56a4[25]];const _0x56a4x3c=(_0x56a4x3b instanceof RegExp?[[_0x56a4x3b[_0x56a4[26]](_0x56a4x34),_0x56a4x3b]]:Array[_0x56a4[27]](_0x56a4x3b)?_0x56a4x3b[_0x56a4[28]]((_0x56a4x43)=>{const _0x56a4x44=_0x56a4x43 instanceof RegExp?_0x56a4x43:new RegExp(_0x56a4x3a(_0x56a4x43));return[_0x56a4x44[_0x56a4[26]](_0x56a4x34),_0x56a4x44]}):typeof _0x56a4x3b===_0x56a4[20]?[[new RegExp(_0x56a4x3a(_0x56a4x3b))[_0x56a4[26]](_0x56a4x34),new RegExp(_0x56a4x3a(_0x56a4x3b))]]:[[[],new RegExp]]).find((_0x56a4x45)=>_0x56a4x45[_0x56a4x5]);if((_0x56a4x37=(_0x56a4x3c[_0x56a4x5]||_0x56a4[22])[_0x56a4x5])){const _0x56a4x3d=_0x56a4x34[_0x56a4[20]](_0x56a4x37,_0x56a4[22]);let [_0x56a4x3e]=_0x56a4x3d[_0x56a4[29]]()[_0x56a4[30]]((_0x56a4x46)=>_0x56a4x46);_0x56a4x3e=(_0x56a4x3e||_0x56a4[22])[_0x56a4[31]]();const _0x56a4x3f=_0x56a4x39[_0x56a4[19]]instanceof RegExp?_0x56a4x39[_0x56a4[19]][_0x56a4[27]](_0x56a4x3e):Array[_0x56a4[27]](_0x56a4x39[_0x56a4[19]])?_0x56a4x39[_0x56a4[19]][_0x56a4[32]]((_0x56a4x47)=>_0x56a4x47 instanceof RegExp?_0x56a4x47[_0x56a4[27]](_0x56a4x3e):_0x56a4x47===_0x56a4x3e):typeof _0x56a4x39[_0x56a4[19]]===_0x56a4[20]?_0x56a4x39[_0x56a4[19]]===_0x56a4x3e:false;if(!_0x56a4x3f){continue}_0x56a4x36=true}}const _0x56a4x40=await generateWAMessage(_0x56a4x2[_0x56a4x2b],{text:_0x56a4x36?_0x56a4x34:_0x56a4x35,mentions:_0x56a4x2[_0x56a4[34]]},[_0x56a4[35],this[_0x56a4[36]][_0x56a4[11]]],[_0x56a4[37]],_0x56a4x2[_0x56a4[38]]&&_0x56a4x2[_0x56a4[38]][_0x56a4[39]]);_0x56a4x40[_0x56a4[40]][_0x56a4[41]]=areJidsSameUser(_0x56a4x2[_0x56a4x2d],this[_0x56a4[36]][_0x56a4[11]]);_0x56a4x40[_0x56a4[40]][_0x56a4[42]]=_0x56a4x2[_0x56a4[40]][_0x56a4[42]];_0x56a4x40[_0x56a4[43]]=_0x56a4x2[_0x56a4[44]];if(_0x56a4x2[_0x56a4[45]]){_0x56a4x40[_0x56a4[40]][_0x56a4[46]]=_0x56a4x40[_0x56a4[46]]=_0x56a4x2[_0x56a4x2d]}const _0x56a4x41={..._0x56a4x3,messages:[proto[_0x56a4[2]][_0x56a4[47]](_0x56a4x40)][_0x56a4[28]]((_0x56a4x48)=>((_0x56a4x48[_0x56a4[48]]=this),_0x56a4x48)),type:_0x56a4[51]};this[_0x56a4[48]][_0x56a4[49]](_0x56a4[50],_0x56a4x41)}

// @type {import('@whiskeysockets/baileys')}

const { proto, generateWAMessage, areJidsSameUser, decryptPollVote, } = (await import('@whiskeysockets/baileys')).default;
export async function all(m, chatUpdate) {
if (m.isBaileys) {
return
}
if (!m.message) {
return
}
if (!(m.message.buttonsResponseMessage || m.message.templateButtonReplyMessage || m.message.listResponseMessage || m.message.interactiveResponseMessage)) {
return
}
let id
if (m.message.buttonsResponseMessage) {
id = m.message.buttonsResponseMessage.selectedButtonId
} else if (m.message.templateButtonReplyMessage) {
id = m.message.templateButtonReplyMessage.selectedId
} else if (m.message.listResponseMessage) {
id = m.message.listResponseMessage.singleSelectReply?.selectedRowId;
} else if (m.message.interactiveResponseMessage) {
id = JSON.parse(m.message.interactiveResponseMessage.nativeFlowResponseMessage.paramsJson).id
}
const text = m.message.buttonsResponseMessage?.selectedDisplayText || m.message.templateButtonReplyMessage?.selectedDisplayText || m.message.listResponseMessage?.title
let isIdMessage = false
let usedPrefix
for (const name in global.plugins) {
const plugin = global.plugins[name]
if (!plugin) {
continue
}
if (plugin.disabled) {
continue
}
if (!opts['restrict']) {
if (plugin.tags && plugin.tags.includes('admin')) {
continue
}}
if (typeof plugin !== 'function') {
continue
}
if (!plugin.command) {
continue
}
const str2Regex = (str) => str.replace(/[|\\{}()[\]^$+*?.]/g, '\\$&')
const _prefix = plugin.customPrefix ? plugin.customPrefix : this.prefix ? this.prefix : global.prefix
const match = (_prefix instanceof RegExp ? [[_prefix.exec(id), _prefix]] : Array.isArray(_prefix) ? _prefix.map((p) => {
const re = p instanceof RegExp ? p : new RegExp(str2Regex(p));
return [re.exec(id), re]
}) :
typeof _prefix === 'string' ?
[[new RegExp(str2Regex(_prefix)).exec(id), new RegExp(str2Regex(_prefix))]] :
[[[], new RegExp]]
).find((p) => p[1])
if ((usedPrefix = (match[0] || '')[0])) {
const noPrefix = id.replace(usedPrefix, '')
let [command] = noPrefix.trim().split` `.filter((v) => v)
command = (command || '').toLowerCase()
const isId = plugin.command instanceof RegExp ?
plugin.command.test(command) :
Array.isArray(plugin.command) ?
plugin.command.some((cmd) => cmd instanceof RegExp ?
cmd.test(command) :
cmd === command,
) :
typeof plugin.command === 'string' ?
plugin.command === command :
false
if (!isId) {
continue
}
isIdMessage = true
}}
const messages = await generateWAMessage(m.chat, {text: isIdMessage ? id : text, mentions: m.mentionedJid}, {
userJid: this.user.id,
quoted: m.quoted && m.quoted.fakeObj,
})
messages.key.fromMe = areJidsSameUser(m.sender, this.user.id)
messages.key.id = m.key.id
messages.pushName = m.name
if (m.isGroup) {
messages.key.participant = messages.participant = m.sender
}
const msg = {
...chatUpdate,
messages: [proto.WebMessageInfo.fromObject(messages)].map((v) => (v.conn = this, v)),
type: 'append',
}
this.ev.emit('messages.upsert', msg)
}
